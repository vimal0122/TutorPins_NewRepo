@page "/public/studentregister"
@inherits RegisterStudentBase
<link href="https://cdn.syncfusion.com/blazor/22.2.10/styles/bootstrap4.css" rel="stylesheet" />
<div class="row mt-2 mb-1">
    <h3 class="card-title text-info mb-2 ml-3">Tutor Request</h3>
</div>

<div class="col-lg-12 control-section">
    <SfToast ID="toast_default" @ref="ToastObj" Title="Success !" Content="@ToastContent" Timeout="5000" CssClass="e-toast-success">
        <ToastPosition X="@ToastPosition"></ToastPosition>
    </SfToast>
     <EditForm EditContext="@editContext">
        <DataAnnotationsValidator />
        <div class="content-wrapper">
        <div class="row">
            <div class="form-group mt-1">
                <SfTextBox Placeholder="Your Full Name" @bind-Value="@StudentModel.StudentName" CssClass="e-corner e-input-group form-control" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
                    <ValidationMessage For="() => StudentModel.StudentName" />
                </div>
        </div>
        <div class="row">
            <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfTextBox Placeholder="Email" @bind-Value="@StudentModel.StudentEmail" CssClass="e-corner e-input-group form-control" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>

            <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfTextBox Placeholder="Contact No" CssClass="e-corner e-input-group" @bind-Value="@StudentModel.StudentPhoneNo" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>
        </div>
        <div class="row">
            <div class="form-group mt-2">
                <SfTextBox Placeholder="Parent/Guardian Full Name" @bind-Value="@StudentModel.ParentName" CssClass="e-corner e-input-group form-control" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>
        </div>
        <div class="row">
            <div class="form-group mt-1 col-xs-10 col-sm-10 col-lg-10 col-md-10 mt-3 ms-2">
                <span class="mt-1 mb-1" style="color:#212529; font-size:14px; font-family:' Helvetica Neue','Helvetica','Arial','sans-serif','-apple-system','BlinkMacSystemFont'">Requesting Person is &nbsp;&nbsp;</span>
                <SfRadioButton Label="Parent" Name="RequestFrom" Value="parent" @bind-Checked="@StudentModel.RequestFrom"></SfRadioButton>
                <SfRadioButton Label="Guardian" Name="RequestFrom" Value="guardian" @bind-Checked="@StudentModel.RequestFrom"></SfRadioButton>
                <SfRadioButton Label="Student" Name="RequestFrom" Value="student" @bind-Checked="@StudentModel.RequestFrom"></SfRadioButton>
                @* </div>

                <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6"> *@
                @if (StudentModel.RequestFrom == "parent")
                {
                    <div style="float:right">
                        <span class="mt-1 mb-1" style="color:#212529; font-size:14px; font-family:' Helvetica Neue','Helvetica','Arial','sans-serif','-apple-system','BlinkMacSystemFont'"> Relationship </span>
                        <SfRadioButton Label="Daughter" Name="Relationship" Value="daughter" @bind-Checked="@StudentModel.ParentRelation"></SfRadioButton>
                        <SfRadioButton Label="Son" Name="Relationship" Value="son" @bind-Checked="@StudentModel.ParentRelation"></SfRadioButton>
                    </div>
                }
            </div>

        </div>
        <div class="row">
            <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfTextBox Placeholder="Parent/Guardian Email" @bind-Value="@StudentModel.ParentEmail" CssClass="e-corner e-input-group form-control" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>

            <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfTextBox Placeholder="Parent/Guardian Contact No" CssClass="e-corner e-input-group" @bind-Value="@StudentModel.ParentPhoneNo" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>
        </div>
        <div class="row">
           
            <div class="form-group mt-1 col-xs-6 col-sm-6 col-lg-6 col-md-6 mt-3 ms-2">
                <span class="mt-1 mb-1" style="color:#212529; font-size:14px; font-family:' Helvetica Neue','Helvetica','Arial','sans-serif','-apple-system','BlinkMacSystemFont'">Prefered Mode of contact &nbsp;&nbsp;</span>
                <SfRadioButton Label="Whatsapp" Name="PreferedContactMode" Value="whatsapp" @bind-Checked="@StudentModel.PreferedContactMode"></SfRadioButton>
                <SfRadioButton Label="Phone" Name="PreferedContactMode" Value="phone" @bind-Checked="@StudentModel.PreferedContactMode"></SfRadioButton>
                <SfRadioButton Label="Email" Name="PreferedContactMode" Value="email" @bind-Checked="@StudentModel.PreferedContactMode"></SfRadioButton>
                
            </div>

        </div>
        <div class="row mt-1">
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfTextBox Placeholder="Postal code" CssClass="e-corner e-input-group" @bind-Value="@StudentModel.PostalCode" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>                
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TValue="string" TItem="LocationDto" Placeholder="Select Location" @bind-Value="@SelectedLocation" DataSource="@locationList" FloatLabelType="FloatLabelType.Auto">
                    <DropDownListFieldSettings Text="LocationName" Value="Id"></DropDownListFieldSettings>
                </SfDropDownList>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-xs-12 col-sm-12 col-lg-12 col-md-12">
                <SfTextBox Placeholder="Specify locations, if not listed above" @bind-Value="@StudentOtherLocations" CssClass="e-corner" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TItem="CourseCategoryDto" TValue="string" Placeholder="Select Category" @bind-Value="@SelectedCourseCategory" DataSource="@CourseCategoryList" FloatLabelType="FloatLabelType.Auto">
                    <DropDownListEvents TItem="CourseCategoryDto" TValue="string" ValueChange="OnCourseCategoryChange" />
                    <DropDownListFieldSettings Text="CategoryName" Value="Id" />
                </SfDropDownList>
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TValue="string" TItem="GeneralText" Placeholder="Select Tutor Category" @bind-Value="@StudentModel.PreferedTutorCategory" DataSource="@TutorCategory" FloatLabelType="FloatLabelType.Auto">
                    <DropDownListFieldSettings Text="Name" Value="Id"></DropDownListFieldSettings>
                </SfDropDownList>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-xs-12 col-sm-12 col-lg-12 col-md-12">
                <SfMultiSelect TValue="string[]" EnableSelectionOrder="false" TItem="CourseSubjectDto" Mode="VisualMode.CheckBox" FilterBarPlaceholder="Search Subjects" Placeholder="Subjects to be tutored" AllowFiltering="true" @bind-Value="@SelectedSubjects" DataSource="@courseSubjectList" FloatLabelType="FloatLabelType.Auto" EnableGroupCheckBox="true">
                    <MultiSelectEvents TItem="CourseSubjectDto" TValue="string[]" ValueChange="@SubjectChangeHandler"></MultiSelectEvents>
                    <MultiSelectFieldSettings GroupBy="LevelName" Text="SubjectFullName" Value="Id"></MultiSelectFieldSettings>
                </SfMultiSelect>
                <div class="col-xs-12 col-sm-12 col-lg-12 col-md-12 mt-2" style="display:@ModalDisplay">
                    <table class="table table-hover table-bordered">
                        <thead class="thead-light">
                            <tr>
                                <th style=" font-size: 14px;color:#212529; font-family:' Helvetica Neue','Helvetica','Arial','sans-serif','-apple-system','BlinkMacSystemFont'">Subject Name</th>
                                <th style=" font-size: 14px"> Frequency</th>
                                <th style=" font-size: 14px"> Prefered Time Slots</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if (StoreSubjectDetails.Any())
                            {
                                foreach (var c in StoreSubjectDetails)
                                {
                                    <tr>
                                        <td>
                                            @c.SubjectName
                                        </td>
                                        <td>
                                            <SfTextBox @bind-Value="@c.DurationPerWeek" Placeholder="e.g 2 hours per week" CssClass="e-corner"></SfTextBox>
                                        </td>
                                        <td>
                                            <SfTextBox Placeholder="e.g. Mon-Fri 2PM-4PM  Sat-Sun after 10AM" @bind-Value="@c.PreferedTimeSlots" CssClass="e-corner" ></SfTextBox>
                                        </td>

                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>



            </div>
        </div>
        <div class="row mt-1">
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TValue="string" TItem="GeneralText" Placeholder="Prefered Tutoring Mode" @bind-Value="@StudentModel.PreferedTutoringMode" DataSource="@TutorMode" FloatLabelType="FloatLabelType.Auto">
                    <DropDownListFieldSettings Text="Name" Value="Id"></DropDownListFieldSettings>
                </SfDropDownList>

            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfNumericTextBox Placeholder="Approximate budget ($)" TValue="int?" Min=10 @bind-Value="@StudentModel.ApproxBudget" FloatLabelType="@FloatLabelType.Auto"></SfNumericTextBox>
            </div>
        </div>

        <div class="row mt-1">

            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDatePicker TValue="DateTime?" @bind-Value="@DOSValue" Placeholder="Earliest start Date" Min="@MinDate" FloatLabelType="@FloatLabelType.Auto">
                </SfDatePicker>
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                
                    <SfTextBox Placeholder="Current Academic/Working Institution" CssClass="e-corner e-input-group" @bind-Value="@StudentModel.CurrentInstitution" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
                
            </div>
        </div>
        
        <div class="row mt-1">

            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TValue="string" TItem="GeneralText" Placeholder="Prefered Gender" @bind-Value="@StudentModel.PreferedTutorGender" DataSource="@Genders" FloatLabelType="@FloatLabelType.Auto">
                    <DropDownListFieldSettings Text="Name" Value="Id"></DropDownListFieldSettings>
                </SfDropDownList>
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-6 col-md-6">
                <SfDropDownList TValue="string" TItem="GeneralText" Placeholder="Prefered Race" @bind-Value="@StudentModel.PreferedTutorRace" DataSource="@Race" FloatLabelType="@FloatLabelType.Auto">
                    <DropDownListFieldSettings Text="Name" Value="Id"></DropDownListFieldSettings>
                </SfDropDownList>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-xs-12 col-sm-12 col-lg-12 col-md-12">
                <SfTextBox style="height: 100px" Multiline=true Placeholder="Additional details (if any) " @bind-Value="@StudentModel.AdditionalDetails" CssClass="e-corner" FloatLabelType="@FloatLabelType.Auto"></SfTextBox>
            </div>
        </div>

        <div class="row mt-2 mb-2 text-end float-end">
            <div class="form-group mt-2">
                @* <input type="button" class="btn btn-primary" @onclick="@Save" value="Submit" /> *@
                    <SfButton IsPrimary="true" @onclick="@Save" HtmlAttributes="@(new Dictionary<string, object> { { "type", "submit" } })">Save</SfButton>

                </div>
        </div>
    </div>
    </EditForm> 
</div>

